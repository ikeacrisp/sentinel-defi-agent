<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fold - Positions</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', sans-serif; background: #0b0e14; color: #fff; }
    .fold-card { background: rgba(255,255,255,0.05); border-radius: 24px; }
    .footer-bar { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); background: rgba(255,255,255,0.02); border-radius: 42px 42px 0 0; }
    .encrypted-text { background: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.3) 100%); background-size: 200% 100%; animation: shimmer 2s infinite; -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    .modal-backdrop { background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }
    .position-row { transition: all 0.2s; }
    .position-row:hover { background: rgba(255,255,255,0.03); }
    .detail-panel { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .detail-panel.open { max-height: 400px; }
  </style>
  <script src="https://unpkg.com/@solana/web3.js@1.98.0/lib/index.iife.min.js"></script>
  <script src="wallet.js"></script>
  <script src="program.js"></script>
</head>
<body class="min-h-screen text-white">

  <!-- Navigation -->
  <nav class="px-[42px] py-[42px] flex items-center justify-between">
    <div class="flex items-center gap-[42px]">
      <div class="flex items-center gap-3">
        <svg width="90" height="22" viewBox="0 0 90 22.1954" fill="none"><path d="M14.5537 17.2433C15.6723 19.4618 16.2316 20.571 15.7316 21.3832C15.2315 22.1954 13.9892 22.1954 11.5047 22.1954H9.16237C7.62502 22.1954 6.85635 22.1954 6.23817 21.8141C5.62 21.4328 5.27503 20.7459 4.58511 19.372L1.26764 12.766C0.647827 11.5317 0.337918 10.9146 0.363351 10.2557C0.388785 9.59686 0.745344 9.00546 1.45846 7.82268L2.81207 5.57756C4.22242 3.23834 4.9276 2.06873 5.93414 2.10676C6.94068 2.14479 7.55558 3.36429 8.78537 5.80328L14.5537 17.2433Z" fill="#00EAFF"/><path d="M23.6942 6.66999C23.2368 7.58469 23.0082 8.04205 22.6864 8.39368C22.2593 8.86056 21.7108 9.19955 21.1022 9.37283C20.6438 9.50334 20.1324 9.50334 19.1097 9.50334C17.0644 9.50334 16.0417 9.50334 15.1249 9.24232C13.9077 8.89577 12.8107 8.21779 11.9564 7.28403C11.3129 6.58076 10.8478 5.65058 9.91764 3.79023C9.33958 2.63412 9.05056 2.05607 9.08153 1.59333C9.11927 1.02936 9.43369 0.52062 9.92124 0.234645C10.3213 0 10.9561 0 12.2257 0H21.5041C23.9804 0 25.2186 0 25.719 0.809737C26.2195 1.61947 25.6657 2.72691 24.5583 4.94177L23.6942 6.66999Z" fill="#00EAFF"/><path d="M35.9503 5.69291C35.9503 2.60446 38.421 0.133705 41.5095 0.133705H44.4435V3.22215H41.5095C40.1197 3.22215 39.0387 4.30311 39.0387 5.69291V7.23713H44.4435V10.3256H39.0387V22.0617H35.9503V10.3256H31.7809V7.23713H35.9503V5.69291Z" fill="white"/><path d="M51.6586 22.0617C48.5702 22.0617 46.0994 19.6218 46.0994 16.5334V11.8698C46.0994 8.78136 48.5702 6.3106 51.6586 6.3106H54.1294C57.2178 6.3106 59.6886 8.78136 59.6886 11.8698V16.5334C59.6886 19.6218 57.2178 22.0617 54.1294 22.0617H51.6586ZM49.1879 16.5334C49.1879 17.9232 50.2688 18.9423 51.6586 18.9732H54.1294C55.5192 18.9732 56.6001 17.9232 56.6001 16.5334V11.8698C56.6001 10.48 55.5192 9.39904 54.1294 9.39904H51.6586C50.2688 9.39904 49.1879 10.48 49.1879 11.8698V16.5334Z" fill="white"/><path d="M61.4015 22.0617V18.9732H66.4974V3.22215H61.4015V0.133705H69.5859V18.9732H74.9906V22.0617H61.4015Z" fill="white"/><path d="M81.97 22.0617C78.9125 22.0617 76.4108 19.56 76.4108 16.5025V11.8698C76.4108 8.78136 78.9125 6.3106 81.97 6.3106H84.3481L86.9116 8.04013V0.133705H90V22.0617H86.9116V20.3321L84.3481 22.0617H81.97ZM79.4993 16.5025C79.4993 17.8614 80.6111 18.9732 81.97 18.9732H83.3907L86.9116 16.5951V11.7771L83.3907 9.39904H81.97C80.6111 9.39904 79.4993 10.5109 79.4993 11.8698V16.5025Z" fill="white"/></svg>
        <div class="flex items-center justify-center px-3 py-1.5 rounded-md" style="background:rgba(255,255,255,0.1);"><span style="font-size:15px;font-weight:500;color:rgba(255,255,255,0.5);">beta</span></div>
      </div>
      <div class="flex items-center">
        <a href="index.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Dashboard</a>
        <a href="activity.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Activity</a>
        <a href="alerts.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Alerts</a>
      </div>
    </div>
    <div class="flex items-center gap-3">
      <a href="settings.html" style="color:rgba(255,255,255,0.5);"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg></a>
      <button id="connect-btn" class="px-6 py-3 rounded-xl text-[15px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;"><span id="nav-wallet-addr">Connect</span></button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="px-[42px] pb-8">

    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <div>
        <h1 class="text-[32px] font-semibold tracking-tight mb-1">Positions</h1>
        <p class="text-[15px]" style="color:rgba(255,255,255,0.5);">Manage your monitored DeFi positions</p>
      </div>
      <div class="flex items-center gap-3">
        <button class="px-5 py-3 rounded-xl text-[15px] font-medium flex items-center gap-2 cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);border:none;">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
          Refresh
        </button>
        <button onclick="document.getElementById('addModal').classList.remove('hidden')" class="px-5 py-3 rounded-xl text-[15px] font-medium flex items-center gap-2 cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
          Add Position
        </button>
      </div>
    </div>

    <!-- Filter Pills -->
    <div class="flex items-center gap-3 mb-6">
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:1px solid rgba(0,234,255,0.3);">All (4)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Healthy (3)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Caution (1)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Critical (0)</button>
    </div>

    <!-- Positions Table -->
    <div class="fold-card overflow-hidden">

      <!-- Table Header -->
      <div class="grid grid-cols-12 gap-4 px-6 py-4 text-[13px] font-medium uppercase tracking-wider" style="color:rgba(255,255,255,0.35);border-bottom:1px solid rgba(255,255,255,0.06);">
        <div class="col-span-3">Position</div>
        <div class="col-span-2">Health</div>
        <div class="col-span-2">Value</div>
        <div class="col-span-2">Last Check</div>
        <div class="col-span-2">Protection</div>
        <div class="col-span-1"></div>
      </div>

      <!-- Position 1: Kamino Lending -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail1')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#3b82f6,#8b5cf6);">K</div>
            <div>
              <div class="font-medium text-[15px]">Lending Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Kamino</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check1">12s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail1" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Collateral</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Liq. Threshold</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health Factor</div>
                <div class="text-[14px]" style="color:#00EAFF;">Safe</div>
                <div class="mt-1.5" style="color:rgba(255,255,255,0.3);font-size:11px;">MPC-computed</div>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 2: MarginFi Lending -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail2')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#f97316,#ef4444);">M</div>
            <div>
              <div class="font-medium text-[15px]">Lending Position #2</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">MarginFi</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(251,251,153,0.1);color:#FBFB99;">Caution</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check2">8s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail2" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Collateral</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Liq. Threshold</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health Factor</div><div class="text-[14px]" style="color:#FBFB99;">Caution</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 3: Jupiter LP -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail3')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#22c55e,#14b8a6);">J</div>
            <div>
              <div class="font-medium text-[15px]">LP Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Jupiter</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check3">3s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail3" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Pool Share</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">IL Risk</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health</div><div class="text-[14px]" style="color:#00EAFF;">Safe</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 4: Drift Staking -->
      <div class="position-row cursor-pointer" onclick="toggleDetail('detail4')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#ec4899,#8b5cf6);">D</div>
            <div>
              <div class="font-medium text-[15px]">Staking Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Drift</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check4">18s ago</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.5);">Alert Only</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail4" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Staked</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Rewards</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">APY</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health</div><div class="text-[14px]" style="color:#00EAFF;">Safe</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Add Position Modal -->
  <div id="addModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop">
    <div class="w-full max-w-lg p-8 shadow-2xl" style="background:rgba(20,24,32,0.95);border-radius:24px;">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-[22px] font-semibold tracking-tight">Add Position to Monitor</h2>
        <button onclick="document.getElementById('addModal').classList.add('hidden')" style="color:rgba(255,255,255,0.4);background:none;border:none;cursor:pointer;">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>

      <div class="space-y-6">
        <!-- Protocol -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Protocol</label>
          <div class="grid grid-cols-4 gap-2">
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;color:#fff;">Kamino</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">MarginFi</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">Drift</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">Other</button>
          </div>
        </div>

        <!-- Position Type -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Position Type</label>
          <div class="grid grid-cols-2 gap-2">
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;">
              <div class="font-medium text-[14px] text-white">Lending / Borrowing</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Collateralized loans</div>
            </button>
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);">
              <div class="font-medium text-[14px]" style="color:rgba(255,255,255,0.6);">Liquidity Pool</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">LP positions</div>
            </button>
          </div>
        </div>

        <!-- Position Identifier -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Position Identifier</label>
          <input type="text" placeholder="Account address or position ID..." class="w-full px-4 py-3.5 rounded-xl text-[14px] text-white placeholder-gray-500 focus:outline-none" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);font-family:'SF Pro Display',-apple-system,BlinkMacSystemFont,'Inter',sans-serif;">
        </div>

        <!-- Protection Level -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Protection Level</label>
          <div class="grid grid-cols-2 gap-2">
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);">
              <div class="font-medium text-[14px]" style="color:rgba(255,255,255,0.6);">Alert Only</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Notify when at risk</div>
            </button>
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;">
              <div class="font-medium text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Act automatically on risk</div>
            </button>
          </div>
        </div>

        <!-- Privacy Note -->
        <div class="p-4 rounded-xl" style="background:rgba(43,174,218,0.05);border:1px solid rgba(43,174,218,0.2);">
          <div class="flex items-center gap-2.5 text-[13px]">
            <svg class="w-4 h-4 flex-shrink-0" style="color:#00EAFF;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
            <span style="color:rgba(255,255,255,0.5);">Position data will be encrypted before leaving your device. Fold never sees your values.</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-3 pt-1">
          <button onclick="document.getElementById('addModal').classList.add('hidden')" class="flex-1 px-4 py-3.5 rounded-xl font-medium text-[15px] cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);border:none;">Cancel</button>
          <button onclick="document.getElementById('addModal').classList.add('hidden')" class="flex-1 px-4 py-3.5 rounded-xl font-medium text-[15px] cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;">Add & Monitor</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer-bar px-[42px] py-6 mt-8">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="flex items-center"><span class="px-3 py-1.5 text-[15px] font-medium" style="color:rgba(255,255,255,0.5);">built on</span><svg width="106" height="16" viewBox="0 0 105.713 15.7524" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17.521 12.4198L14.6134 15.5374C14.5505 15.6052 14.4743 15.6592 14.3896 15.6962C14.3049 15.7332 14.2135 15.7523 14.1211 15.7524H0.337828C0.27209 15.7524 0.207788 15.7332 0.152796 15.6971C0.0978052 15.6611 0.0545126 15.6098 0.0282177 15.5496C0.00192282 15.4893-0.00623229 15.4227 0.00475167 15.3579C0.0157356 15.2931 0.0453795 15.2329 0.0900571 15.1846L2.99439 12.067C3.05729 11.9993 3.13344 11.9452 3.21814 11.9083C3.30283 11.8713 3.39424 11.8521 3.48665 11.852H17.2699C17.3362 11.8507 17.4015 11.869 17.4575 11.9046C17.5134 11.9402 17.5577 11.9916 17.5845 12.0523C17.6114 12.113 17.6196 12.1803 17.6083 12.2457C17.597 12.3111 17.5666 12.3716 17.521 12.4198ZM14.6134 6.14019C14.5502 6.07278 14.474 6.01896 14.3894 5.98199C14.3048 5.94504 14.2135 5.92573 14.1211 5.92525H0.337828C0.27209 5.92528 0.207788 5.94448 0.152796 5.98051C0.0978052 6.01653 0.0545126 6.06781 0.0282177 6.12806C0.00192282 6.18831-0.00623229 6.25492 0.00475167 6.31973C0.0157356 6.38455 0.0453795 6.44477 0.0900571 6.49299L2.99439 9.61228C3.05752 9.67969 3.13373 9.73351 3.21837 9.77047C3.30301 9.80743 3.3943 9.82674 3.48665 9.82722H17.2699C17.3356 9.82687 17.3996 9.80743 17.4544 9.77129C17.5092 9.73515 17.5522 9.68385 17.5783 9.62367C17.6043 9.56348 17.6124 9.49699 17.6012 9.43232C17.5902 9.36766 17.5607 9.3076 17.5161 9.25949L14.6134 6.14019ZM0.337828 3.9004H14.1211C14.2135 3.90032 14.3049 3.88117 14.3896 3.84419C14.4743 3.80722 14.5505 3.75317 14.6134 3.68545L17.521 0.567812C17.5666 0.519656 17.597 0.459073 17.6083 0.393686C17.6196 0.328299 17.6114 0.261029 17.5845 0.20034C17.5577 0.139651 17.5134 0.0882551 17.4575 0.0526199C17.4015 0.0169845 17.3362-0.0012984 17.2699 7.17391e-05H3.48665C3.39424 0.000169016 3.30283 0.0193057 3.21814 0.0562885C3.13344 0.0932712 3.05729 0.147307 2.99439 0.215025L0.0900571 3.33266C0.0453795 3.38089 0.0157356 3.44111 0.00475167 3.50592C-0.00623229 3.57074 0.00192282 3.63734 0.0282177 3.69759C0.0545126 3.75785 0.0978052 3.80912 0.152796 3.84514C0.207788 3.88117 0.27209 3.90037 0.337828 3.9004Z" fill="white"/>
  <path d="M34.3251 6.66202H26.951V4.23353H36.2416V1.80505H26.9264C26.6081 1.80333 26.2927 1.8643 25.998 1.98449C25.7033 2.1047 25.4351 2.28177 25.2089 2.5056C24.9827 2.72943 24.8027 2.99565 24.6793 3.28902C24.5559 3.5824 24.4914 3.89722 24.4897 4.21548V6.67678C24.4911 6.99532 24.5551 7.3105 24.6783 7.60425C24.8015 7.89801 24.9814 8.16461 25.2076 8.38878C25.4341 8.61297 25.7023 8.79033 25.9972 8.91074C26.2921 9.03115 26.6079 9.09224 26.9264 9.0905H34.3103V11.519H24.6653V13.9475H34.3251C34.6434 13.9492 34.9588 13.8882 35.2535 13.768C35.5482 13.6478 35.8165 13.4707 36.0426 13.2469C36.2689 13.0231 36.4489 12.7569 36.5723 12.4635C36.6957 12.1701 36.7601 11.8553 36.7618 11.537V9.07573C36.7605 8.75719 36.6965 8.44203 36.5733 8.14826C36.45 7.8545 36.2702 7.58791 36.0439 7.36373C35.8175 7.13956 35.5492 6.9622 35.2543 6.84179C34.9595 6.72138 34.6436 6.66029 34.3251 6.66202Z" fill="white"/>
  <path d="M48.6105 1.80501H41.2085C40.8897 1.80242 40.5735 1.86276 40.278 1.98257C39.9826 2.10239 39.7137 2.27931 39.4868 2.50324C39.2597 2.72715 39.0792 2.99364 38.9555 3.28745C38.8316 3.58127 38.7669 3.89663 38.7653 4.21545V11.537C38.7669 11.8558 38.8316 12.1712 38.9555 12.465C39.0792 12.7588 39.2597 13.0253 39.4868 13.2492C39.7137 13.4731 39.9826 13.6501 40.278 13.7699C40.5735 13.8897 40.8897 13.95 41.2085 13.9474H48.6105C48.9288 13.9492 49.2442 13.8882 49.5389 13.768C49.8336 13.6478 50.1019 13.4707 50.328 13.2469C50.5543 13.023 50.7343 12.7568 50.8577 12.4635C50.9811 12.1701 51.0455 11.8553 51.0472 11.537V4.21545C51.0455 3.89718 50.9811 3.58237 50.8577 3.28898C50.7343 2.99561 50.5543 2.7294 50.328 2.50556C50.1019 2.28173 49.8336 2.10467 49.5389 1.98446C49.2442 1.86427 48.9288 1.80329 48.6105 1.80501ZM48.5924 11.5189H41.2266V4.2335H48.5892L48.5924 11.5189Z" fill="white"/>
  <path d="M74.5362 1.80503H67.3164C66.998 1.80331 66.6827 1.86428 66.388 1.98448C66.0933 2.10469 65.825 2.28175 65.5989 2.50558C65.3726 2.72941 65.1926 2.99563 65.0692 3.289C64.9458 3.58239 64.8813 3.8972 64.8797 4.21547V13.9474H67.341V9.9585H74.528V13.9474H76.9893V4.21547C76.9876 3.89581 76.9227 3.57965 76.7983 3.28518C76.6737 2.99072 76.4924 2.72379 76.2643 2.49973C76.0364 2.27568 75.7663 2.09896 75.4697 1.97974C75.173 1.86051 74.8558 1.80114 74.5362 1.80503ZM74.5181 7.53002H67.3311V4.23352H74.5181V7.53002Z" fill="white"/>
  <path d="M103.276 1.80505H96.0562C95.7378 1.80333 95.4225 1.8643 95.1278 1.98449C94.8331 2.1047 94.5649 2.28177 94.3387 2.5056C94.1124 2.72943 93.9324 2.99565 93.809 3.28902C93.6856 3.5824 93.6211 3.89722 93.6195 4.21548V13.9475H96.0808V9.95852H103.251V13.9475H105.713V4.21548C105.711 3.89722 105.647 3.5824 105.523 3.28902C105.4 2.99565 105.22 2.72943 104.993 2.5056C104.767 2.28177 104.499 2.1047 104.204 1.98449C103.91 1.8643 103.594 1.80333 103.276 1.80505ZM103.251 7.53003H96.0644V4.23353H103.251V7.53003Z" fill="white"/>
  <path d="M88.9758 11.519H87.9913L84.4716 2.82237C84.351 2.52234 84.1435 2.2652 83.8757 2.08395C83.6079 1.90268 83.292 1.80556 82.9686 1.80503H80.7846C80.5723 1.80395 80.3619 1.84469 80.1655 1.92492C79.9689 2.00515 79.7902 2.1233 79.6393 2.27262C79.4885 2.42195 79.3685 2.59951 79.2863 2.7952C79.2041 2.99087 79.1613 3.20084 79.1601 3.41308V13.9474H81.6214V4.23352H82.606L86.124 12.9301C86.2466 13.2296 86.4558 13.4857 86.7247 13.6657C86.9935 13.8457 87.31 13.9415 87.6336 13.9409H89.8176C90.0299 13.942 90.2403 13.9012 90.4367 13.821C90.6333 13.7408 90.8119 13.6226 90.9629 13.4733C91.1137 13.324 91.2336 13.1464 91.3159 12.9507C91.3981 12.755 91.4409 12.5451 91.442 12.3328V1.80503H88.9758V11.519Z" fill="white"/>
  <path d="M55.6826 1.80501H53.2213V11.537C53.223 11.856 53.2878 12.1715 53.4117 12.4654C53.5356 12.7593 53.7162 13.0259 53.9433 13.2498C54.1704 13.4737 54.4397 13.6506 54.7352 13.7703C55.0309 13.8901 55.3472 13.9502 55.6662 13.9474H63.0501V11.5189H55.6826V1.80501Z" fill="white"/>
</svg></div>
        <div style="width:2px;height:20px;background:rgba(217,217,217,0.2);"></div>
        <div class="flex items-center"><span class="px-3 py-1.5 text-[15px] font-medium" style="color:rgba(255,255,255,0.5);">powered by</span><svg width="98" height="17" viewBox="0 0 98 16.3803" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- A triangle mark -->
  <path d="M16.0998 1.29411C15.3067-0.208538 13.011 0.0478661 13.011 0.0478661C13.4761 0.453342 13.6192 0.834967 13.8935 1.33585L20.2321 14.4184H18.8964L12.6473 1.50281C11.6276-0.458979 8.15126-0.542459 7.20316 1.50281L0 16.3802H2.21819L8.82507 2.66557C9.27228 1.74729 10.5722 1.78903 10.9836 2.64172L17.6263 16.3802H23.4043L16.0998 1.29411Z" fill="white"/>
  <path d="M9.65987 3.5899L3.53599 16.3803H5.76015L10.9956 5.35491L10.1309 3.57797C9.86858 3.03535 9.9282 3.04727 9.65987 3.5899Z" fill="white"/>
  <!-- ARCIUM text -->
  <g transform="translate(27.0, 3.9)">
    <path d="M9.12321 8.56844L6.71421 2.51611C6.49954 1.98542 6.03444 1.66342 5.45604 1.66342C4.8836 1.66342 4.41254 1.97945 4.19787 2.51611L1.78887 8.56844H0L2.65348 1.90194C3.11859 0.73321 4.19191 0.00573782 5.45008 0.00573782C6.70825 0.00573782 7.7756 0.73321 8.24667 1.90194L10.9002 8.56844H9.12321Z" fill="white"/>
    <path d="M21.6453 8.56866L20.2679 5.11615H17.1314C16.6424 5.11615 16.2369 5.51567 16.231 6.00462V8.56866H14.5733V6.01655C14.5733 4.93727 15.259 3.97128 16.2787 3.60754C16.553 3.51214 16.8392 3.45847 17.1314 3.45847H20.7568C21.2458 3.45847 21.6512 3.05896 21.6572 2.57V2.55211C21.6512 2.06316 21.2517 1.66364 20.7568 1.66364H14.5793V0.0119245H20.7568C21.049 0.0119245 21.3352 0.0596274 21.6095 0.160996C22.6292 0.524732 23.3149 1.49072 23.3149 2.57C23.3149 3.00529 23.2016 3.44058 22.981 3.82221C22.7365 4.25153 22.3728 4.60335 21.9375 4.82994L23.4282 8.56866H21.6453Z" fill="white"/>
    <path d="M30.369 8.56865C28.592 8.56865 27.149 7.12563 27.149 5.34869V3.2259C27.149 1.44896 28.592 0.0059431 30.369 0.0059431H35.8847V1.66363H30.369C29.5103 1.66363 28.8067 2.36725 28.8067 3.2259V5.34869C28.8067 6.20734 29.5103 6.91096 30.369 6.91096H35.8847V8.56865H30.369Z" fill="white"/>
    <path d="M41.3765 0.0119245H39.7188V8.57463H41.3765V0.0119245Z" fill="white"/>
    <path d="M48.4186 8.56866C46.6477 8.56866 45.1987 7.12565 45.1987 5.34871V0.0119245H46.8564V5.35467C46.8564 6.21332 47.56 6.91694 48.4186 6.91694H51.5015C52.3601 6.91694 53.0637 6.21332 53.0637 5.35467V0.0119245H54.7214V5.35467C54.7214 7.12565 53.2784 8.57463 51.5015 8.57463H48.4186V8.56866Z" fill="white"/>
    <path d="M68.9191 8.53289V1.97371C68.9191 1.95583 68.9191 1.9439 68.9131 1.92601V1.90812V1.89023C68.9131 1.7829 68.8356 1.6875 68.7342 1.66364C68.7163 1.65768 68.6984 1.65768 68.6805 1.65768C68.609 1.65768 68.5434 1.6875 68.5017 1.74116L68.4897 1.75905L66.1046 6.99446C66.0867 7.03024 66.0688 7.07198 66.0509 7.11372C65.8661 7.53112 65.6097 8.10356 65.234 8.34804C65.0551 8.4673 64.8345 8.52692 64.5662 8.52692C64.2978 8.52692 64.0772 8.4673 63.8983 8.34804C63.5286 8.10356 63.2722 7.53112 63.0814 7.11372C63.0635 7.07198 63.0456 7.03024 63.0277 6.99446L60.6426 1.75905L60.6306 1.74116C60.5889 1.6875 60.5233 1.65768 60.4518 1.65768C60.4339 1.65768 60.416 1.65768 60.3981 1.66364C60.2908 1.6875 60.2192 1.7829 60.2192 1.89023V1.90812V1.92601C60.2192 1.9439 60.2132 1.95583 60.2132 1.97371V8.53289H58.5556V1.97371C58.5556 1.91409 58.5556 1.85446 58.5615 1.79483V1.78887C58.6092 0.954061 59.2115 0.238516 60.0284 0.0477033C60.1655 0.0178888 60.3087 0 60.4518 0C60.4875 0 60.5233 0 60.5591 0.00596279C61.1375 0.0357772 61.6801 0.345847 62.0081 0.822878L62.0916 0.948099L64.5662 6.38625L67.0407 0.948099L67.1242 0.822878C67.4522 0.345847 67.9948 0.0417401 68.5732 0.00596279C68.609 0.00596279 68.6448 0 68.6805 0C68.8237 0 68.9608 0.0178888 69.1039 0.0477033C69.9208 0.232553 70.5231 0.948099 70.5708 1.78887V1.79483C70.5767 1.84849 70.5767 1.90812 70.5767 1.96775V8.52692H68.9191V8.53289Z" fill="white"/>
  </g>
</svg></div>
      </div>
      <div class="flex items-center">
        <a href="#" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Docs</a>
        <a href="https://github.com/ikeacrisp/fold-defi-agent" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Github</a>
        <a href="#" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Discord</a>
      </div>
    </div>
  </footer>

  <script>
    function toggleDetail(id) {
      document.getElementById(id).classList.toggle('open');
    }

    (async function() {
      await FoldWallet.init();
      if (!FoldWallet.isConnected()) { window.location.href = 'connect.html'; return; }
      document.getElementById('nav-wallet-addr').textContent = FoldWallet.shortenAddress(FoldWallet.publicKey);

      // Fetch real positions
      try {
        var positions = await FoldProgram.fetchPositionsByOwner(FoldWallet.publicKey);
        // Update filter counts
        var allBadge = document.querySelector('[class*="text-accent-green"][class*="font-semibold"]');
        if (allBadge && allBadge.textContent.includes('All')) {
          // keep as is for now
        }
        // If we have real positions, we could replace the mock list
        // For now, append a live section indicator
        if (positions.length > 0) {
          var header = document.querySelector('h1');
          if (header) header.textContent = 'Positions (' + positions.length + ' on-chain)';
        }
      } catch(e) { console.error(e); }

      // Tick timers
      setInterval(function() {
        ['check1','check2','check3','check4'].forEach(function(id) {
          var el = document.getElementById(id);
          if (!el) return;
          var m = el.textContent.match(/(\d+)s/);
          if (m) el.textContent = (parseInt(m[1]) + 1) + 's ago';
        });
      }, 1000);
    })();
  </script>
</body>
</html>