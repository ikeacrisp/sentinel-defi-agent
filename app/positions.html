<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fold - Positions</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', sans-serif; background: #0b0e14; color: #fff; }
    .fold-card { background: rgba(255,255,255,0.05); border-radius: 24px; }
    .footer-bar { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); background: rgba(255,255,255,0.02); border-radius: 42px 42px 0 0; }
    .encrypted-text { background: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.3) 100%); background-size: 200% 100%; animation: shimmer 2s infinite; -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    .modal-backdrop { background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }
    .position-row { transition: all 0.2s; }
    .position-row:hover { background: rgba(255,255,255,0.03); }
    .detail-panel { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .detail-panel.open { max-height: 400px; }
  </style>
  <script src="https://unpkg.com/@solana/web3.js@1.98.0/lib/index.iife.min.js"></script>
  <script src="wallet.js"></script>
  <script src="program.js"></script>
</head>
<body class="min-h-screen text-white">

  <!-- Navigation -->
  <nav class="px-[42px] py-[42px] flex items-center justify-between">
    <div class="flex items-center gap-[42px]">
      <div class="flex items-center gap-3">
        <svg width="90" height="22" viewBox="0 0 90 22" fill="none"><path d="M0 11C0 4.925 4.925 0 11 0C17.075 0 22 4.925 22 11C22 17.075 17.075 22 11 22C4.925 22 0 17.075 0 11Z" fill="#00EAFF" opacity="0.2"/><path d="M7 8.5L11 6L15 8.5V13.5L11 16L7 13.5V8.5Z" stroke="#00EAFF" stroke-width="1.5" fill="none"/><path d="M11 6V16M7 8.5L15 13.5M15 8.5L7 13.5" stroke="#00EAFF" stroke-width="0.75" opacity="0.5"/><text x="28" y="16" fill="white" font-family="'SF Pro Display',-apple-system,BlinkMacSystemFont,'Inter',sans-serif" font-weight="600" font-size="18" letter-spacing="-0.5">fold</text></svg>
        <div class="flex items-center justify-center px-3 py-1.5 rounded-md" style="background:rgba(255,255,255,0.1);"><span style="font-size:15px;font-weight:500;color:rgba(255,255,255,0.5);">beta</span></div>
      </div>
      <div class="flex items-center">
        <a href="index.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Dashboard</a>
        <a href="activity.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Activity</a>
        <a href="alerts.html" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);">Alerts</a>
      </div>
    </div>
    <div class="flex items-center gap-3">
      <a href="settings.html" style="color:rgba(255,255,255,0.5);"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg></a>
      <button id="connect-btn" class="px-6 py-3 rounded-xl text-[15px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;"><span id="nav-wallet-addr">Connect</span></button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="px-[42px] pb-8">

    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <div>
        <h1 class="text-[32px] font-semibold tracking-tight mb-1">Positions</h1>
        <p class="text-[15px]" style="color:rgba(255,255,255,0.5);">Manage your monitored DeFi positions</p>
      </div>
      <div class="flex items-center gap-3">
        <button class="px-5 py-3 rounded-xl text-[15px] font-medium flex items-center gap-2 cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);border:none;">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
          Refresh
        </button>
        <button onclick="document.getElementById('addModal').classList.remove('hidden')" class="px-5 py-3 rounded-xl text-[15px] font-medium flex items-center gap-2 cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
          Add Position
        </button>
      </div>
    </div>

    <!-- Filter Pills -->
    <div class="flex items-center gap-3 mb-6">
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:1px solid rgba(0,234,255,0.3);">All (4)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Healthy (3)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Caution (1)</button>
      <button class="px-5 py-2.5 rounded-xl text-[14px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:1px solid transparent;">Critical (0)</button>
    </div>

    <!-- Positions Table -->
    <div class="fold-card overflow-hidden">

      <!-- Table Header -->
      <div class="grid grid-cols-12 gap-4 px-6 py-4 text-[13px] font-medium uppercase tracking-wider" style="color:rgba(255,255,255,0.35);border-bottom:1px solid rgba(255,255,255,0.06);">
        <div class="col-span-3">Position</div>
        <div class="col-span-2">Health</div>
        <div class="col-span-2">Value</div>
        <div class="col-span-2">Last Check</div>
        <div class="col-span-2">Protection</div>
        <div class="col-span-1"></div>
      </div>

      <!-- Position 1: Kamino Lending -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail1')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#3b82f6,#8b5cf6);">K</div>
            <div>
              <div class="font-medium text-[15px]">Lending Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Kamino</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check1">12s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail1" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Collateral</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Liq. Threshold</div>
                <div class="text-[14px] encrypted-text">██████</div>
                <div class="flex items-center gap-1 mt-1.5" style="color:#00EAFF;font-size:11px;">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
                  encrypted
                </div>
              </div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);">
                <div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health Factor</div>
                <div class="text-[14px]" style="color:#00EAFF;">Safe</div>
                <div class="mt-1.5" style="color:rgba(255,255,255,0.3);font-size:11px;">MPC-computed</div>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 2: MarginFi Lending -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail2')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#f97316,#ef4444);">M</div>
            <div>
              <div class="font-medium text-[15px]">Lending Position #2</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">MarginFi</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(251,251,153,0.1);color:#FBFB99;">Caution</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check2">8s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail2" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Collateral</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Liq. Threshold</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health Factor</div><div class="text-[14px]" style="color:#FBFB99;">Caution</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 3: Jupiter LP -->
      <div class="position-row cursor-pointer" style="border-bottom:1px solid rgba(255,255,255,0.06);" onclick="toggleDetail('detail3')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#22c55e,#14b8a6);">J</div>
            <div>
              <div class="font-medium text-[15px]">LP Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Jupiter</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check3">3s ago</div>
          <div class="col-span-2 text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail3" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Value</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Pool Share</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">IL Risk</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health</div><div class="text-[14px]" style="color:#00EAFF;">Safe</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Position 4: Drift Staking -->
      <div class="position-row cursor-pointer" onclick="toggleDetail('detail4')">
        <div class="grid grid-cols-12 gap-4 px-6 py-4 items-center">
          <div class="col-span-3 flex items-center gap-3">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-[14px]" style="background:linear-gradient(135deg,#ec4899,#8b5cf6);">D</div>
            <div>
              <div class="font-medium text-[15px]">Staking Position #1</div>
              <div class="text-[13px]" style="color:rgba(255,255,255,0.35);">Drift</div>
            </div>
          </div>
          <div class="col-span-2">
            <span class="px-3 py-1 rounded-full text-[13px] font-medium" style="background:rgba(43,174,218,0.1);color:#00EAFF;">Healthy</span>
          </div>
          <div class="col-span-2 text-[14px] encrypted-text">██████</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.6);" id="check4">18s ago</div>
          <div class="col-span-2 text-[14px]" style="color:rgba(255,255,255,0.5);">Alert Only</div>
          <div class="col-span-1 text-right">
            <svg class="w-5 h-5 inline-block" style="color:rgba(255,255,255,0.3);" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </div>
        </div>
        <div id="detail4" class="detail-panel">
          <div class="px-6 pb-5 pt-2" style="border-top:1px solid rgba(255,255,255,0.04);">
            <div class="grid grid-cols-4 gap-4 mb-4">
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Staked</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Rewards</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">APY</div><div class="text-[14px] encrypted-text">██████</div></div>
              <div class="rounded-xl p-4" style="background:rgba(255,255,255,0.05);"><div class="text-[12px] mb-1" style="color:rgba(255,255,255,0.4);">Health</div><div class="text-[14px]" style="color:#00EAFF;">Safe</div></div>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(43,174,218,0.1);color:#2BAEDA;border:none;">Force Check</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Pause</button>
              <button class="px-4 py-2 rounded-xl text-[13px] font-medium cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);border:none;">Remove</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Add Position Modal -->
  <div id="addModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop">
    <div class="w-full max-w-lg p-8 shadow-2xl" style="background:rgba(20,24,32,0.95);border-radius:24px;">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-[22px] font-semibold tracking-tight">Add Position to Monitor</h2>
        <button onclick="document.getElementById('addModal').classList.add('hidden')" style="color:rgba(255,255,255,0.4);background:none;border:none;cursor:pointer;">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>

      <div class="space-y-6">
        <!-- Protocol -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Protocol</label>
          <div class="grid grid-cols-4 gap-2">
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;color:#fff;">Kamino</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">MarginFi</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">Drift</button>
            <button class="p-3 rounded-xl text-[14px] text-center cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.6);">Other</button>
          </div>
        </div>

        <!-- Position Type -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Position Type</label>
          <div class="grid grid-cols-2 gap-2">
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;">
              <div class="font-medium text-[14px] text-white">Lending / Borrowing</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Collateralized loans</div>
            </button>
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);">
              <div class="font-medium text-[14px]" style="color:rgba(255,255,255,0.6);">Liquidity Pool</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">LP positions</div>
            </button>
          </div>
        </div>

        <!-- Position Identifier -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Position Identifier</label>
          <input type="text" placeholder="Account address or position ID..." class="w-full px-4 py-3.5 rounded-xl text-[14px] text-white placeholder-gray-500 focus:outline-none" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);font-family:'SF Pro Display',-apple-system,BlinkMacSystemFont,'Inter',sans-serif;">
        </div>

        <!-- Protection Level -->
        <div>
          <label class="text-[13px] mb-3 block" style="color:rgba(255,255,255,0.4);">Protection Level</label>
          <div class="grid grid-cols-2 gap-2">
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);">
              <div class="font-medium text-[14px]" style="color:rgba(255,255,255,0.6);">Alert Only</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Notify when at risk</div>
            </button>
            <button class="p-4 rounded-xl text-left cursor-pointer" style="background:rgba(255,255,255,0.05);border:1px solid #00EAFF;">
              <div class="font-medium text-[14px]" style="color:#00EAFF;">Auto-Protect</div>
              <div class="text-[12px] mt-0.5" style="color:rgba(255,255,255,0.35);">Act automatically on risk</div>
            </button>
          </div>
        </div>

        <!-- Privacy Note -->
        <div class="p-4 rounded-xl" style="background:rgba(43,174,218,0.05);border:1px solid rgba(43,174,218,0.2);">
          <div class="flex items-center gap-2.5 text-[13px]">
            <svg class="w-4 h-4 flex-shrink-0" style="color:#00EAFF;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
            <span style="color:rgba(255,255,255,0.5);">Position data will be encrypted before leaving your device. Fold never sees your values.</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-3 pt-1">
          <button onclick="document.getElementById('addModal').classList.add('hidden')" class="flex-1 px-4 py-3.5 rounded-xl font-medium text-[15px] cursor-pointer" style="background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);border:none;">Cancel</button>
          <button onclick="document.getElementById('addModal').classList.add('hidden')" class="flex-1 px-4 py-3.5 rounded-xl font-medium text-[15px] cursor-pointer" style="background:rgba(43,174,218,0.1);color:#00EAFF;border:none;">Add & Monitor</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer-bar px-[42px] py-6 mt-8">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="flex items-center"><span class="px-3 py-1.5 text-[15px] font-medium" style="color:rgba(255,255,255,0.5);">built on</span><span class="text-white text-[15px] font-semibold tracking-wide pr-3">SOLANA</span></div>
        <div style="width:2px;height:20px;background:rgba(217,217,217,0.2);"></div>
        <div class="flex items-center"><span class="px-3 py-1.5 text-[15px] font-medium" style="color:rgba(255,255,255,0.5);">powered by</span><span class="text-white text-[15px] font-semibold tracking-wide pr-3">ARCIUM</span></div>
      </div>
      <div class="flex items-center">
        <a href="#" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Docs</a>
        <a href="https://github.com/ikeacrisp/fold-defi-agent" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Github</a>
        <a href="#" class="px-6 py-3 text-[15px] font-medium" style="color:rgba(255,255,255,0.6);text-decoration:none;">Discord</a>
      </div>
    </div>
  </footer>

  <script>
    function toggleDetail(id) {
      document.getElementById(id).classList.toggle('open');
    }

    (async function() {
      await FoldWallet.init();
      if (!FoldWallet.isConnected()) { window.location.href = 'connect.html'; return; }
      document.getElementById('nav-wallet-addr').textContent = FoldWallet.shortenAddress(FoldWallet.publicKey);

      // Fetch real positions
      try {
        var positions = await FoldProgram.fetchPositionsByOwner(FoldWallet.publicKey);
        // Update filter counts
        var allBadge = document.querySelector('[class*="text-accent-green"][class*="font-semibold"]');
        if (allBadge && allBadge.textContent.includes('All')) {
          // keep as is for now
        }
        // If we have real positions, we could replace the mock list
        // For now, append a live section indicator
        if (positions.length > 0) {
          var header = document.querySelector('h1');
          if (header) header.textContent = 'Positions (' + positions.length + ' on-chain)';
        }
      } catch(e) { console.error(e); }

      // Tick timers
      setInterval(function() {
        ['check1','check2','check3','check4'].forEach(function(id) {
          var el = document.getElementById(id);
          if (!el) return;
          var m = el.textContent.match(/(\d+)s/);
          if (m) el.textContent = (parseInt(m[1]) + 1) + 's ago';
        });
      }, 1000);
    })();
  </script>
</body>
</html>